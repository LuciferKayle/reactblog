(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{698:function(t,e){},726:function(t,e,n){},788:function(t,e,n){"use strict";n.r(e);n(244);var a,i,s,r,c=n(209),o=(n(51),n(21)),l=(n(55),n(32)),u=n(184),p=(n(141),n(85)),f=n(19),h=n(11),m=n(12),d=n(15),g=n(13),v=n(14),y=n(0),b=n.n(y),E=n(23),C=n(694),O=n.n(C),j=(n(699),n(726),n(34)),L=n(87),k=(n(109),n(68)),w=(n(40),n(4)),I=(n(145),n(58)),R=function(t){function e(){var t,n;Object(h.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(d.a)(this,(t=Object(g.a)(e)).call.apply(t,[this].concat(i)))).state={list:[],inputVisible:!1,inputValue:""},n.handleClose=function(t){var e=n.state.list.filter(function(e){return e!==t});n.setState({list:e})},n.showInput=function(){n.setState({inputVisible:!0},function(){return n.input.focus()})},n.handleInputChange=function(t){n.setState({inputValue:t.target.value})},n.handleInputConfirm=function(){var t=n.state,e=t.inputValue,a=t.list,i=n.props.CommonlyList;!e||a.includes(e)||i.includes(e)||(a=[].concat(Object(L.a)(a),[e])),n.setState({list:a,inputVisible:!1,inputValue:""})},n.saveInputRef=function(t){return n.input=t},n}return Object(v.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this,e=this.state,n=e.list,a=e.inputVisible,i=e.inputValue;return b.a.createElement(y.Fragment,null,n.map(function(e,n){var a=e.length>20,i=b.a.createElement(k.a,{key:e,closable:!0,afterClose:function(){return t.handleClose(e)},color:"#1890ff"},a?"".concat(e.slice(0,20),"..."):e);return a?b.a.createElement(I.a,{title:e,key:e},i):i}),a&&b.a.createElement(l.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:i,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&b.a.createElement(k.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},b.a.createElement(w.a,{type:"plus"})," New Tag"))}}]),e}(y.Component),S=k.a.CheckableTag,N=Object(E.b)(function(t){return t.article})((s=i=function(t){function e(t){var n;Object(h.a)(this,e),(n=Object(d.a)(this,Object(g.a)(e).call(this,t))).getCommonlyList=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t.sort(function(t,e){return e.count-t.count}).map(function(t){return t.name}).slice(0,e)},n.handleSelect=function(t,e){var a=n.state.selectList,i=e?[].concat(Object(L.a)(a),[t]):a.filter(function(e){return e!==t});n.setState({selectList:i})},n.getResult=function(){var t=n.state.selectList,e=n.$selfCateRef.state.list;return[].concat(Object(L.a)(t),Object(L.a)(e))};var a,i=n.props,s=i.type,r=i.showNum;return n.props.isEdit||(n.CommonlyList=n.getCommonlyList(n.props["".concat(s,"List")],r),a=n.CommonlyList[0]?[n.CommonlyList[0]]:[]),n.state={selectList:a},n}return Object(v.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this)}},{key:"componentWillReceiveProps",value:function(t){this.props.list!==t.list&&t.isEdit&&this.setState({selectList:t.list})}},{key:"render",value:function(){var t=this,e=this.state.selectList,n=this.props,a=n.type,i=n.isEdit;return b.a.createElement("div",{className:"blog-formItem"},b.a.createElement("span",{className:"label"},a,": "),i?this.props.list.map(function(n,a){return b.a.createElement(S,{key:n,checked:e.includes(n),onChange:function(e){return t.handleSelect(n,e)}},n)}):this.CommonlyList.map(function(n,a){return b.a.createElement(S,{key:n,checked:e.includes(n),onChange:function(e){return t.handleSelect(n,e)}},n)}),b.a.createElement(R,{CommonlyList:this.props.list,ref:function(e){return t.$selfCateRef=e}}))}}]),e}(y.Component),i.defaultProps={type:"tags",showNum:10},a=s))||a,V=Object(E.b)(function(t){return t.article})(r=function(t){function e(){var t,n;Object(h.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(d.a)(this,(t=Object(g.a)(e)).call.apply(t,[this].concat(i)))).state={value:"",title:"",tagList:[],categoryList:[],isEdit:!1},n.getCommonlyList=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t.sort(function(t,e){return e.count-t.count}).slice(0,e)},n.handleSubmit=function(){var t=n.$tagRef.getResult(),e=n.$categoryRef.getResult(),a={title:n.state.title,content:n.smde.value(),categories:e,tags:t};n.state.isEdit?n.axios.put("/article/update",Object(f.a)({},a,{articleId:n.state.articleId})).then(function(t){p.a.confirm({title:"\u6587\u7ae0\u4fee\u6539\u6210\u529f\uff01\u662f\u5426\u67e5\u770b\u8be6\u60c5\uff1f",onOk:function(){return n.props.history.push("/article/".concat(n.state.articleId))}})}):n.axios.post("/article/create",a).then(function(t){p.a.confirm({title:"\u6587\u7ae0\u521b\u5efa\u6210\u529f\uff01\u662f\u5426\u7acb\u5373\u67e5\u770b\uff1f",onOk:function(){return n.props.history.push("/article/".concat(t.data.id))}})})},n.handleUpdate=function(){},n.handleChange=function(t){n.setState(Object(u.a)({},t.target.name,t.target.value))},n}return Object(v.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){var t=this;if(this.smde=new O.a({element:document.getElementById("editor").childElementCount,autofocus:!0,autosave:!0,previewRender:j.e}),this.props.history.location.state){var e=this.props.history.location.state.articleId;this.axios.get("/article/get/".concat(e)).then(function(n){var a=n.data,i=a.title,s=a.tags,r=a.categories,c=a.content;t.smde.value(c);var o=s.map(function(t){return t.name}),l=r.map(function(t){return t.name});t.setState({title:i,tagList:o,categoryList:l,isEdit:!0,articleId:e})})}}},{key:"render",value:function(){var t=this,e=this.state,n=e.title,a=e.value,i=e.categoryList,s=e.tagList,r=e.isEdit;return b.a.createElement("div",{className:"edit"},b.a.createElement("div",{className:"blog-formItem"},b.a.createElement("span",{className:"label"},"\u6807\u9898\uff1a"),b.a.createElement(l.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",className:"title-input",name:"title",value:n,onChange:this.handleChange})),b.a.createElement(N,{type:"category",showNum:10,onRef:function(e){return t.$categoryRef=e},list:i,isEdit:r}),b.a.createElement(N,{type:"tag",showNum:12,onRef:function(e){return t.$tagRef=e},list:s,isEdit:r}),b.a.createElement("br",null),b.a.createElement("textarea",{id:"editor",defaultValue:a}),b.a.createElement(o.a,{onClick:this.handleSubmit,type:"primary"},r?"\u66f4\u65b0":"\u521b\u5efa"),b.a.createElement(c.a,null))}}]),e}(y.Component))||r;e.default=V}}]);
//# sourceMappingURL=10.29aba116.chunk.js.map